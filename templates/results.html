{% extends "layouts/base.html" %}

{% block title %} Search Results {% endblock title %}

<!-- Specific CSS goes HERE  -->
{% block stylesheets %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/tabs.css') }}" />

{% endblock stylesheets %}

{% block content %}

<!-- ### main content ### -->
<main class=''>
    <div id='mainContent' class="container">
        <div class="container-fluid">
            <div class="row">
                <div class="col mt-4">
                    <div class="row">
                        <div class="col tabs-section">
                            <ul class="nav nav-tabs nav-paginator" data-paginator-item-count="4"
                                data-paginator-buttons-class="nav-link" id="myTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active position-relative" id="publications-tab"
                                        data-bs-toggle="tab" data-bs-target="#publications" type="button" role="tab"
                                        aria-controls="publications" aria-selected="true"><i
                                            class="px-1 bi-journal-album"></i>Publications
                                        <span
                                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill">
                                            {{results.publications|count}}
                                            <span class="visually-hidden">publications</span>
                                        </span>
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link position-relative" id="researchers-tab" data-bs-toggle="tab"
                                        data-bs-target="#researchers" type="button" role="tab"
                                        aria-controls="researchers" aria-selected="false"><i
                                            class="px-1 bi-people-fill"></i>Researchers
                                        <span
                                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill">
                                            {{results.researchers|count}}
                                            <span class="visually-hidden">researchers</span>
                                        </span>
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link position-relative" id="resources-tab" data-bs-toggle="tab"
                                        data-bs-target="#resources" type="button" role="tab" aria-controls="resources"
                                        aria-selected="false"><i class="px-1 bi-database-fill-gear"></i>Resources
                                        <span
                                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill">
                                            {{results.resources|count}}
                                            <span class="visually-hidden">resources</span>
                                        </span>
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link position-relative" id="organizations-tab"
                                        data-bs-toggle="tab" data-bs-target="#organizations" type="button" role="tab"
                                        aria-controls="organizations" aria-selected="false"><i
                                            class="px-1 bi-bank"></i>Organizations
                                        <span
                                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill">
                                            {{results.organizations|count}}
                                            <span class="visually-hidden">organizations</span>
                                        </span>
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link position-relative" id="events-tab" data-bs-toggle="tab"
                                        data-bs-target="#events" type="button" role="tab" aria-controls="events"
                                        aria-selected="false"><i class="px-1 bi-calendar3"></i>Events
                                        <span
                                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill">
                                            {{results.events|count}}
                                            <span class="visually-hidden">events</span>
                                        </span>
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link position-relative" id="fundings-tab" data-bs-toggle="tab"
                                        data-bs-target="#fundings" type="button" role="tab" aria-controls="fundings"
                                        aria-selected="false"><i class="px-1 bi-currency-exchange"></i>Fundings
                                        <span
                                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill">
                                            {{results.fundings|count}}
                                            <span class="visually-hidden">fundings</span>
                                        </span>
                                    </button>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link position-relative" id="others-tab" data-bs-toggle="tab"
                                        data-bs-target="#others" type="button" role="tab" aria-controls="others"
                                        aria-selected="false"><i class="px-1 bi-file-code-fill"></i>Others
                                        <span
                                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill">
                                            {{results.researchers|count}}
                                            <span class="visually-hidden">researchers</span>
                                        </span>
                                    </button>
                                </li>
                            </ul>
                        </div>
                        <div class="col-auto text-end">
                            <a href="#" data-bs-target="#chatbox" data-bs-toggle="collapse" id="chatbox-link"
                                style="display: none;">
                                <img style="height: 48px; width: 48px;"
                                    src="{{ url_for('static', filename='images/maven.png') }}" alt="avatar"
                                    title="Chat with me" /></a>
                        </div>
                    </div>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="publications" role="tabpanel"
                            aria-labelledby="publications-tab">
                            {% include 'components/publications.html' %}
                        </div>
                        <div class="tab-pane fade" id="researchers" role="tabpanel" aria-labelledby="researchers-tab">
                            {% include 'components/researchers.html' %}
                        </div>
                        <div class="tab-pane fade" id="resources" role="tabpanel" aria-labelledby="resources-tab">...
                        </div>
                        <div class="tab-pane fade" id="organizations" role="tabpanel"
                            aria-labelledby="organizations-tab">...
                        </div>
                        <div class="tab-pane fade" id="events" role="tabpanel" aria-labelledby="events-tab">...</div>
                        <div class="tab-pane fade" id="fundings" role="tabpanel" aria-labelledby="fundings-tab">...
                        </div>
                        <div class="tab-pane fade" id="others" role="tabpanel" aria-labelledby="others-tab">...</div>
                    </div>
                </div>
                <div class="col-auto px-0 mt-4">
                    {% include 'components/chatbox.html' %}
                </div>
            </div>
        </div>
    </div>
</main>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script>

    $(document).ready(function () {

        var dataTable = $('.datatable').DataTable({});
        dataTable.on('page.dt', function () {
            $('html, body').scrollTop(100)
            $('html, body').stop().animate({
                scrollTop: $(".dataTables_wrapper").offset().top
            }, 'slow');

            $('thead tr th:first-child').focus().blur();
        });

        $('#chatbox').on('show.bs.collapse hidden.bs.collapse', function (e) {
            if (e.type == 'show') {
                $('#chatbox-link').hide()
            } else {
                $('#chatbox-link').show()
            }
        });

    });



</script>


{% endblock javascripts %}